#安全问题和指针误用  

##声明和初始化指针  
###不恰当的指针声明  
如下错误声明  
```c
int* ptr1, ptr2; //ptr2是个整数
```
正确写法:  
```c
int * ptr1, *ptr2;
```
也不能使用宏  
```c
#define PINT int *
PINT ptr1, ptr2;
printf("%d %d\n", sizeof ptr1, sizeof ptr2);
```
输出结果:  
```c
8 4
```
使用类型定义  
```c
typedef  int* PINT;
```
输出结果:  
```c
8 8 
```
###使用指针前未初始化  
有3种方法处理未初始化的指针  
+ 总是用NULL初始化指针  
+ 用assert函数
+ 用第三方工具

```c
    assert (ptr2 != NULL);
```
##指针使用问题  

###测试NULL  
用malloc这类函数时要检查返回值  
###错误使用解引用操作  
错误声明  
```c
int num;
int *pi;
*pi=num;
```
正确声明:  
```c
int num;
int *pi;
pi=num;
```

###迷途指针  
释放指针后仍然引用原来的内存,就会产生迷途指针  

###越界访问内存  

###错误使用sizeof操作符  
###一定要匹配指针类型

###指针算术运算和结构体  
算术运算可以得到有效偏移量,不过不应该把它用在结构体内,因为结构体的字段可能分配在不连续的内存区域  



##内存释放问题  
将同一块内存释放两次,会导致漏洞,避免的方法是释放后将其置为NULL,大部分堆管理器会忽略对NULL的释放  




